{%extends 'core/base.html'%}
<!DOCTYPE html>
<html lang="en">
  <head>
   
    <title>{%block title%}{% firstof request.user.get_full_name user.username %}{%endblock%}</title>

  </head>
  {%block baseblock%}
    
    <div class="container mt-5">
      <div class="row">
        <div class="col-12">
          <h1 class="vendor-title">{{request.user.username}}</h1>
          {%if request.user.userprofile.is_vendor is False %}
          <div class="card mb-4">
            <div class="card-header">Become a vendor </div>
            <div class="card-body">
              <a href="{% url 'become_vendor' %}"
                ><button class="btn btn-primary">Become vendor</button></a
              >
            </div>
          </div>
          {%endif%}
      <div class="row">
    
        <div class="container">
          <h1>Your Orders</h1>
          <ul class="list-group">
              {% for order in orders %}
              <li class="list-group-item">
                  <a href="{%url 'order_details' order.id%}">Order ID: {{ order.id }} - {{ order.created_at }}</a>
              </li>
              {% endfor %}
          </ul>
      </div>
        <!-- End of product block -->

      <h1>Your Cart</h1>
      <br><br>
        {% for item in cart_items %}
        <div class="col-md-4 ">
            <div class="card">
                <img src="{{ item.product.image.url }}" class="card-img-top" alt="{{ item.product.name }}">
                <div class="card-body">
                    <h5 class="card-title">{{ item.product.name }}</h5>
                    <p class="card-text">Quantity: {{ item.quantity }}</p>
                    <p class="card-text">Price: Rs. {{ item.product.price }}</p>
                    <div class="d-flex justify-content-between align-items-center">
                        <form action="{% url 'increment_quantity' item.id %}" method="post" class="d-inline">
                            {% csrf_token %}
                            <button type="submit" class="btn btn-outline-success btn-sm">+</button>
                        </form>
                        <form action="{% url 'decrement_quantity' item.id %}" method="post" class="d-inline">
                            {% csrf_token %}
                            <button type="submit" class="btn btn-outline-warning btn-sm">-</button>
                        </form>
                        <form action="{% url 'remove_from_cart' item.id %}" method="post" class="d-inline">
                            {% csrf_token %}
                            <button type="submit" class="btn btn-outline-danger btn-sm">Remove</button>
                        </form>
                    </div>
                </div>
            </div>

        {% endfor %}
    </div>
      </div>
    </div>
    {%endblock%}


    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  </body>
</html>
